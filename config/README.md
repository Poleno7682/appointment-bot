# üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Appointment Bot

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞.

## üìÅ –§–∞–π–ª—ã

### `settings.json` - –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã:

- **base_url**: URL API —Å–∏—Å—Ç–µ–º—ã –∑–∞–ø–∏—Å–∏  
- **site_url**: URL —Å–∞–π—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–π
- **email**: Email –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- **repeat_minutes**: –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30)
- **prefixes**: –ü—Ä–µ—Ñ–∏–∫—Å—ã —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **retry_settings**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **reset_cycle**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –æ—Å–≤–æ–±–æ–¥–∏–≤—à–∏—Ö—Å—è –º–µ—Å—Ç
  - **enabled**: –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å reset-—Ü–∏–∫–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: true)
  - **interval_hours**: –ò–Ω—Ç–µ—Ä–≤–∞–ª –∑–∞–ø—É—Å–∫–∞ reset-—Ü–∏–∫–ª–∞ –≤ —á–∞—Å–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 168)
  - **max_future_days**: –ú–∞–∫—Å–∏–º—É–º –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30)
  - **marker_file**: –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É-–º–∞—Ä–∫–µ—Ä—É –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
- **logging**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### `channels.json` - –ö–∞–Ω–∞–ª—ã –∏ —É—Å–ª—É–≥–∏
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Telegram –∫–∞–Ω–∞–ª–æ–≤ –∏ —É—Å–ª—É–≥ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:

- **telegram**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram –±–æ—Ç–∞
  - **enabled**: –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - **bot_token**: –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
- **channels**: –ú–∞—Å—Å–∏–≤ –∫–∞–Ω–∞–ª–æ–≤
  - **id**: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–∞–Ω–∞–ª–∞
  - **name**: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
  - **chat_id**: ID Telegram —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  - **services**: –ú–∞—Å—Å–∏–≤ —É—Å–ª—É–≥ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    - **branch_name**: –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª–µ–Ω–∏—è
    - **branch_id**: ID –æ—Ç–¥–µ–ª–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ
    - **service_name**: –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏
    - **service_id**: ID —É—Å–ª—É–≥–∏ –≤ —Å–∏—Å—Ç–µ–º–µ
    - **qpId**: ID –æ—á–µ—Ä–µ–¥–∏
    - **adult**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∑—Ä–æ—Å–ª—ã—Ö
    - **visits_per_day**: –ú–∞–∫—Å–∏–º—É–º –≤–∏–∑–∏—Ç–æ–≤ –≤ –¥–µ–Ω—å
    - **last_registered_date**: –ü–æ—Å–ª–µ–¥–Ω—è—è –¥–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)

## üîÑ Reset-—Ü–∏–∫–ª

Reset-—Ü–∏–∫–ª - —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∏ –∏—â–µ—Ç –æ—Å–≤–æ–±–æ–¥–∏–≤—à–∏–µ—Å—è –º–µ—Å—Ç–∞ –Ω–∞ —É–∂–µ "–ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö" –¥–∞—Ç–∞—Ö.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞**: –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –∏ `last_registered_date`
2. **–ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫**: –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ N —á–∞—Å–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
3. **–ü–æ–∏—Å–∫ —Å —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã**: –ù–∞—á–∏–Ω–∞–µ—Ç –ø–æ–∏—Å–∫ —Å —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏**: –ò—â–µ—Ç –º–∞–∫—Å–∏–º—É–º –Ω–∞ N –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥
5. **–û–±—ã—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```json
{
  "reset_cycle": {
    "enabled": true,
    "interval_hours": 168,
    "max_future_days": 30,
    "marker_file": "/var/lib/appointment-bot/last-reset"
  }
}
```

### –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã:
- `24` - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- `72` - –∫–∞–∂–¥—ã–µ 3 –¥–Ω—è  
- `168` - –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `720` - –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã `.example` –∏ —É–±–µ—Ä–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –≤ `settings.json`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–∞–Ω–∞–ª—ã –∏ —É—Å–ª—É–≥–∏ –≤ `channels.json`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

## üîß –í–∞–ª–∏–¥–∞—Ü–∏—è

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏ –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö. 